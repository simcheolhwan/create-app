import O from"node:fs";import D from"node:path";import{fileURLToPath as ht}from"node:url";import{execSync as I}from"node:child_process";import lt from"readline";import ut from"events";function be(e,n){O.statSync(e).isDirectory()?at(e,n):O.copyFileSync(e,n)}function at(e,n){O.mkdirSync(n,{recursive:!0});for(const c of O.readdirSync(e)){const t=D.resolve(e,c),h=D.resolve(n,c);be(t,h)}}function ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _={},L,we;function M(){if(we)return L;we=1;const{FORCE_COLOR:e,NODE_DISABLE_COLORS:n,TERM:c}=process.env,t={enabled:!n&&c!=="dumb"&&e!=="0",reset:s(0,0),bold:s(1,22),dim:s(2,22),italic:s(3,23),underline:s(4,24),inverse:s(7,27),hidden:s(8,28),strikethrough:s(9,29),black:s(30,39),red:s(31,39),green:s(32,39),yellow:s(33,39),blue:s(34,39),magenta:s(35,39),cyan:s(36,39),white:s(37,39),gray:s(90,39),grey:s(90,39),bgBlack:s(40,49),bgRed:s(41,49),bgGreen:s(42,49),bgYellow:s(43,49),bgBlue:s(44,49),bgMagenta:s(45,49),bgCyan:s(46,49),bgWhite:s(47,49)};function h(d,r){let o=0,i,u="",p="";for(;o<d.length;o++)i=d[o],u+=i.open,p+=i.close,r.includes(i.close)&&(r=r.replace(i.rgx,i.close+i.open));return u+r+p}function f(d,r){let o={has:d,keys:r};return o.reset=t.reset.bind(o),o.bold=t.bold.bind(o),o.dim=t.dim.bind(o),o.italic=t.italic.bind(o),o.underline=t.underline.bind(o),o.inverse=t.inverse.bind(o),o.hidden=t.hidden.bind(o),o.strikethrough=t.strikethrough.bind(o),o.black=t.black.bind(o),o.red=t.red.bind(o),o.green=t.green.bind(o),o.yellow=t.yellow.bind(o),o.blue=t.blue.bind(o),o.magenta=t.magenta.bind(o),o.cyan=t.cyan.bind(o),o.white=t.white.bind(o),o.gray=t.gray.bind(o),o.grey=t.grey.bind(o),o.bgBlack=t.bgBlack.bind(o),o.bgRed=t.bgRed.bind(o),o.bgGreen=t.bgGreen.bind(o),o.bgYellow=t.bgYellow.bind(o),o.bgBlue=t.bgBlue.bind(o),o.bgMagenta=t.bgMagenta.bind(o),o.bgCyan=t.bgCyan.bind(o),o.bgWhite=t.bgWhite.bind(o),o}function s(d,r){let o={open:`\x1B[${d}m`,close:`\x1B[${r}m`,rgx:new RegExp(`\\x1b\\[${r}m`,"g")};return function(i){return this!==void 0&&this.has!==void 0?(this.has.includes(d)||(this.has.push(d),this.keys.push(o)),i===void 0?this:t.enabled?h(this.keys,i+""):i+""):i===void 0?f([d],[o]):t.enabled?h([o],i+""):i+""}}return L=t,L}var H,ye;function dt(){return ye||(ye=1,H=(e,n)=>{if(!(e.meta&&e.name!=="escape")){if(e.ctrl){if(e.name==="a")return"first";if(e.name==="c"||e.name==="d")return"abort";if(e.name==="e")return"last";if(e.name==="g")return"reset"}if(n){if(e.name==="j")return"down";if(e.name==="k")return"up"}return e.name==="return"||e.name==="enter"?"submit":e.name==="backspace"?"delete":e.name==="delete"?"deleteForward":e.name==="abort"?"abort":e.name==="escape"?"exit":e.name==="tab"?"next":e.name==="pagedown"?"nextPage":e.name==="pageup"?"prevPage":e.name==="home"?"home":e.name==="end"?"end":e.name==="up"?"up":e.name==="down"?"down":e.name==="right"?"right":e.name==="left"?"left":!1}}),H}var F,xe;function Y(){return xe||(xe=1,F=e=>{const n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),c=new RegExp(n,"g");return typeof e=="string"?e.replace(c,""):e}),F}var V,Se;function $(){if(Se)return V;Se=1;const e="\x1B",n=`${e}[`,c="\x07",t={to(s,d){return d?`${n}${d+1};${s+1}H`:`${n}${s+1}G`},move(s,d){let r="";return s<0?r+=`${n}${-s}D`:s>0&&(r+=`${n}${s}C`),d<0?r+=`${n}${-d}A`:d>0&&(r+=`${n}${d}B`),r},up:(s=1)=>`${n}${s}A`,down:(s=1)=>`${n}${s}B`,forward:(s=1)=>`${n}${s}C`,backward:(s=1)=>`${n}${s}D`,nextLine:(s=1)=>`${n}E`.repeat(s),prevLine:(s=1)=>`${n}F`.repeat(s),left:`${n}G`,hide:`${n}?25l`,show:`${n}?25h`,save:`${e}7`,restore:`${e}8`},h={up:(s=1)=>`${n}S`.repeat(s),down:(s=1)=>`${n}T`.repeat(s)},f={screen:`${n}2J`,up:(s=1)=>`${n}1J`.repeat(s),down:(s=1)=>`${n}J`.repeat(s),line:`${n}2K`,lineEnd:`${n}K`,lineStart:`${n}1K`,lines(s){let d="";for(let r=0;r<s;r++)d+=this.line+(r<s-1?t.up():"");return s&&(d+=t.left),d}};return V={cursor:t,scroll:h,erase:f,beep:c},V}var N,Me;function ft(){if(Me)return N;Me=1;const e=Y(),{erase:n,cursor:c}=$(),t=h=>[...e(h)].length;return N=function(h,f){if(!f)return n.line+c.to(0);let s=0;const d=h.split(/\r?\n/);for(let r of d)s+=1+Math.floor(Math.max(t(r)-1,0)/f);return n.lines(s)},N}var B,$e;function Oe(){if($e)return B;$e=1;const e={arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",radioOn:"\u25C9",radioOff:"\u25EF",tick:"\u2714",cross:"\u2716",ellipsis:"\u2026",pointerSmall:"\u203A",line:"\u2500",pointer:"\u276F"},n={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"\u221A",cross:"\xD7",ellipsis:"...",pointerSmall:"\xBB",line:"\u2500",pointer:">"};return B=process.platform==="win32"?n:e,B}var U,Pe;function pt(){if(Pe)return U;Pe=1;const e=M(),n=Oe(),c=Object.freeze({password:{scale:1,render:r=>"*".repeat(r.length)},emoji:{scale:2,render:r=>"\u{1F603}".repeat(r.length)},invisible:{scale:0,render:r=>""},default:{scale:1,render:r=>`${r}`}}),t=r=>c[r]||c.default,h=Object.freeze({aborted:e.red(n.cross),done:e.green(n.tick),exited:e.yellow(n.cross),default:e.cyan("?")});return U={styles:c,render:t,symbols:h,symbol:(r,o,i)=>o?h.aborted:i?h.exited:r?h.done:h.default,delimiter:r=>e.gray(r?n.ellipsis:n.pointerSmall),item:(r,o)=>e.gray(r?o?n.pointerSmall:"+":n.line)},U}var G,Re;function mt(){if(Re)return G;Re=1;const e=Y();return G=function(n,c){let t=String(e(n)||"").split(/\r?\n/);return c?t.map(h=>Math.ceil(h.length/c)).reduce((h,f)=>h+f):t.length},G}var J,Te;function gt(){return Te||(Te=1,J=(e,n={})=>{const c=Number.isSafeInteger(parseInt(n.margin))?new Array(parseInt(n.margin)).fill(" ").join(""):n.margin||"",t=n.width;return(e||"").split(/\r?\n/g).map(h=>h.split(/\s+/g).reduce((f,s)=>(s.length+c.length>=t||f[f.length-1].length+s.length+1<t?f[f.length-1]+=` ${s}`:f.push(`${c}${s}`),f),[c]).join(`
`)).join(`
`)}),J}var W,Ce;function vt(){return Ce||(Ce=1,W=(e,n,c)=>{c=c||n;let t=Math.min(n-c,e-Math.floor(c/2));t<0&&(t=0);let h=Math.min(t+c,n);return{startIndex:t,endIndex:h}}),W}var K,qe;function P(){return qe||(qe=1,K={action:dt(),clear:ft(),style:pt(),strip:Y(),figures:Oe(),lines:mt(),wrap:gt(),entriesToDisplay:vt()}),K}var z,De;function q(){if(De)return z;De=1;const e=lt,{action:n}=P(),c=ut,{beep:t,cursor:h}=$(),f=M();class s extends c{constructor(r={}){super(),this.firstRender=!0,this.in=r.stdin||process.stdin,this.out=r.stdout||process.stdout,this.onRender=(r.onRender||(()=>{})).bind(this);const o=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,o),this.in.isTTY&&this.in.setRawMode(!0);const i=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,u=(p,l)=>{let a=n(l,i);a===!1?this._&&this._(p,l):typeof this[a]=="function"?this[a](l):this.bell()};this.close=()=>{this.out.write(h.show),this.in.removeListener("keypress",u),this.in.isTTY&&this.in.setRawMode(!1),o.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",u)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(t)}render(){this.onRender(f),this.firstRender&&(this.firstRender=!1)}}return z=s,z}var Q,ke;function bt(){if(ke)return Q;ke=1;const e=M(),n=q(),{erase:c,cursor:t}=$(),{style:h,clear:f,lines:s,figures:d}=P();class r extends n{constructor(i={}){super(i),this.transform=h.render(i.style),this.scale=this.transform.scale,this.msg=i.message,this.initial=i.initial||"",this.validator=i.validate||(()=>!0),this.value="",this.errorMsg=i.error||"Please Enter A Valid Value",this.cursor=+!!this.initial,this.cursorOffset=0,this.clear=f("",this.out.columns),this.render()}set value(i){!i&&this.initial?(this.placeholder=!0,this.rendered=e.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(i)),this._value=i,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=+!!this.initial,this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let i=await this.validator(this.value);typeof i=="string"&&(this.errorMsg=i,i=!1),this.error=!i}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error){this.red=!0,this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(i){this.placeholder||(this.cursor=this.cursor+i,this.cursorOffset+=i)}_(i,u){let p=this.value.slice(0,this.cursor),l=this.value.slice(this.cursor);this.value=`${p}${i}${l}`,this.red=!1,this.cursor=this.placeholder?0:p.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let i=this.value.slice(0,this.cursor-1),u=this.value.slice(this.cursor);this.value=`${i}${u}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let i=this.value.slice(0,this.cursor),u=this.value.slice(this.cursor+1);this.value=`${i}${u}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return this.cursor===0||this.placeholder&&this.cursor===1}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(t.down(s(this.outputError,this.out.columns)-1)+f(this.outputError,this.out.columns)),this.out.write(f(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[h.symbol(this.done,this.aborted),e.bold(this.msg),h.delimiter(this.done),this.red?e.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((i,u,p)=>i+`
${p?" ":d.pointerSmall} ${e.red().italic(u)}`,"")),this.out.write(c.line+t.to(0)+this.outputText+t.save+this.outputError+t.restore+t.move(this.cursorOffset,0)))}}return Q=r,Q}var Z,Ie;function wt(){if(Ie)return Z;Ie=1;const e=M(),n=q(),{style:c,clear:t,figures:h,wrap:f,entriesToDisplay:s}=P(),{cursor:d}=$();class r extends n{constructor(i={}){super(i),this.msg=i.message,this.hint=i.hint||"- Use arrow-keys. Return to submit.",this.warn=i.warn||"- This option is disabled",this.cursor=i.initial||0,this.choices=i.choices.map((u,p)=>(typeof u=="string"&&(u={title:u,value:p}),{title:u&&(u.title||u.value||u),value:u&&(u.value===void 0?p:u.value),description:u&&u.description,selected:u&&u.selected,disabled:u&&u.disabled})),this.optionsPerPage=i.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=t("",this.out.columns),this.render()}moveCursor(i){this.cursor=i,this.value=this.choices[i].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){this.cursor===0?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(i,u){if(i===" ")return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(d.hide):this.out.write(t(this.outputText,this.out.columns)),super.render();let{startIndex:i,endIndex:u}=s(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[c.symbol(this.done,this.aborted),e.bold(this.msg),c.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+=`
`;for(let p=i;p<u;p++){let l,a,m="",g=this.choices[p];p===i&&i>0?a=h.arrowUp:p===u-1&&u<this.choices.length?a=h.arrowDown:a=" ",g.disabled?(l=this.cursor===p?e.gray().underline(g.title):e.strikethrough().gray(g.title),a=(this.cursor===p?e.bold().gray(h.pointer)+" ":"  ")+a):(l=this.cursor===p?e.cyan().underline(g.title):g.title,a=(this.cursor===p?e.cyan(h.pointer)+" ":"  ")+a,g.description&&this.cursor===p&&(m=` - ${g.description}`,(a.length+l.length+m.length>=this.out.columns||g.description.split(/\r?\n/).length>1)&&(m=`
`+f(g.description,{margin:3,width:this.out.columns})))),this.outputText+=`${a} ${l}${e.gray(m)}
`}}this.out.write(this.outputText)}}return Z=r,Z}var X,Ee;function yt(){if(Ee)return X;Ee=1;const e=M(),n=q(),{style:c,clear:t}=P(),{cursor:h,erase:f}=$();class s extends n{constructor(r={}){super(r),this.msg=r.message,this.value=!!r.initial,this.active=r.active||"on",this.inactive=r.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}deactivate(){if(this.value===!1)return this.bell();this.value=!1,this.render()}activate(){if(this.value===!0)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(r,o){if(r===" ")this.value=!this.value;else if(r==="1")this.value=!0;else if(r==="0")this.value=!1;else return this.bell();this.render()}render(){this.closed||(this.firstRender?this.out.write(h.hide):this.out.write(t(this.outputText,this.out.columns)),super.render(),this.outputText=[c.symbol(this.done,this.aborted),e.bold(this.msg),c.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(f.line+h.to(0)+this.outputText))}}return X=s,X}var ee,Ae;function T(){if(Ae)return ee;Ae=1;class e{constructor({token:c,date:t,parts:h,locales:f}){this.token=c,this.date=t||new Date,this.parts=h||[this],this.locales=f||{}}up(){}down(){}next(){const c=this.parts.indexOf(this);return this.parts.find((t,h)=>h>c&&t instanceof e)}setTo(c){}prev(){let c=[].concat(this.parts).reverse();const t=c.indexOf(this);return c.find((h,f)=>f>t&&h instanceof e)}toString(){return String(this.date)}}return ee=e,ee}var te,je;function xt(){if(je)return te;je=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let t=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?t.toUpperCase():t}}return te=n,te}var ie,_e;function St(){if(_e)return ie;_e=1;const e=T(),n=t=>(t=t%10,t===1?"st":t===2?"nd":t===3?"rd":"th");class c extends e{constructor(h={}){super(h)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(h){this.date.setDate(parseInt(h.substr(-2)))}toString(){let h=this.date.getDate(),f=this.date.getDay();return this.token==="DD"?String(h).padStart(2,"0"):this.token==="Do"?h+n(h):this.token==="d"?f+1:this.token==="ddd"?this.locales.weekdaysShort[f]:this.token==="dddd"?this.locales.weekdays[f]:h}}return ie=c,ie}var se,Le;function Mt(){if(Le)return se;Le=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(t){this.date.setHours(parseInt(t.substr(-2)))}toString(){let t=this.date.getHours();return/h/.test(this.token)&&(t=t%12||12),this.token.length>1?String(t).padStart(2,"0"):t}}return se=n,se}var re,He;function $t(){if(He)return re;He=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(t){this.date.setMilliseconds(parseInt(t.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}return re=n,re}var ne,Fe;function Ot(){if(Fe)return ne;Fe=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(t){this.date.setMinutes(parseInt(t.substr(-2)))}toString(){let t=this.date.getMinutes();return this.token.length>1?String(t).padStart(2,"0"):t}}return ne=n,ne}var oe,Ye;function Pt(){if(Ye)return oe;Ye=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(t){t=parseInt(t.substr(-2))-1,this.date.setMonth(t<0?0:t)}toString(){let t=this.date.getMonth(),h=this.token.length;return h===2?String(t+1).padStart(2,"0"):h===3?this.locales.monthsShort[t]:h===4?this.locales.months[t]:String(t+1)}}return oe=n,oe}var he,Ve;function Rt(){if(Ve)return he;Ve=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(t){this.date.setSeconds(parseInt(t.substr(-2)))}toString(){let t=this.date.getSeconds();return this.token.length>1?String(t).padStart(2,"0"):t}}return he=n,he}var le,Ne;function Tt(){if(Ne)return le;Ne=1;const e=T();class n extends e{constructor(t={}){super(t)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(t){this.date.setFullYear(t.substr(-4))}toString(){let t=String(this.date.getFullYear()).padStart(4,"0");return this.token.length===2?t.substr(-2):t}}return le=n,le}var ue,Be;function Ct(){return Be||(Be=1,ue={DatePart:T(),Meridiem:xt(),Day:St(),Hours:Mt(),Milliseconds:$t(),Minutes:Ot(),Month:Pt(),Seconds:Rt(),Year:Tt()}),ue}var ae,Ue;function qt(){if(Ue)return ae;Ue=1;const e=M(),n=q(),{style:c,clear:t,figures:h}=P(),{erase:f,cursor:s}=$(),{DatePart:d,Meridiem:r,Day:o,Hours:i,Milliseconds:u,Minutes:p,Month:l,Seconds:a,Year:m}=Ct(),g=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,x={1:({token:b})=>b.replace(/\\(.)/g,"$1"),2:b=>new o(b),3:b=>new l(b),4:b=>new m(b),5:b=>new r(b),6:b=>new i(b),7:b=>new p(b),8:b=>new a(b),9:b=>new u(b)},y={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};class w extends n{constructor(v={}){super(v),this.msg=v.message,this.cursor=0,this.typed="",this.locales=Object.assign(y,v.locales),this._date=v.initial||new Date,this.errorMsg=v.error||"Please Enter A Valid Value",this.validator=v.validate||(()=>!0),this.mask=v.mask||"YYYY-MM-DD HH:mm:ss",this.clear=t("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(v){v&&this._date.setTime(v.getTime())}set mask(v){let S;for(this.parts=[];S=g.exec(v);){let R=S.shift(),C=S.findIndex(ot=>ot!=null);this.parts.push(C in x?x[C]({token:S[C]||R,date:this.date,parts:this.parts,locales:this.locales}):S[C]||R)}let A=this.parts.reduce((R,C)=>(typeof C=="string"&&typeof R[R.length-1]=="string"?R[R.length-1]+=C:R.push(C),R),[]);this.parts.splice(0),this.parts.push(...A),this.reset()}moveCursor(v){this.typed="",this.cursor=v,this.fire()}reset(){this.moveCursor(this.parts.findIndex(v=>v instanceof d)),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let v=await this.validator(this.value);typeof v=="string"&&(this.errorMsg=v,v=!1),this.error=!v}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let v=this.parts[this.cursor].prev();if(v==null)return this.bell();this.moveCursor(this.parts.indexOf(v)),this.render()}right(){let v=this.parts[this.cursor].next();if(v==null)return this.bell();this.moveCursor(this.parts.indexOf(v)),this.render()}next(){let v=this.parts[this.cursor].next();this.moveCursor(v?this.parts.indexOf(v):this.parts.findIndex(S=>S instanceof d)),this.render()}_(v){/\d/.test(v)&&(this.typed+=v,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(s.hide):this.out.write(t(this.outputText,this.out.columns)),super.render(),this.outputText=[c.symbol(this.done,this.aborted),e.bold(this.msg),c.delimiter(!1),this.parts.reduce((v,S,A)=>v.concat(A===this.cursor&&!this.done?e.cyan().underline(S.toString()):S),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split(`
`).reduce((v,S,A)=>v+`
${A?" ":h.pointerSmall} ${e.red().italic(S)}`,"")),this.out.write(f.line+s.to(0)+this.outputText))}}return ae=w,ae}var ce,Ge;function Dt(){if(Ge)return ce;Ge=1;const e=M(),n=q(),{cursor:c,erase:t}=$(),{style:h,figures:f,clear:s,lines:d}=P(),r=/[0-9]/,o=p=>p!==void 0,i=(p,l)=>{let a=Math.pow(10,l);return Math.round(p*a)/a};class u extends n{constructor(l={}){super(l),this.transform=h.render(l.style),this.msg=l.message,this.initial=o(l.initial)?l.initial:"",this.float=!!l.float,this.round=l.round||2,this.inc=l.increment||1,this.min=o(l.min)?l.min:-1/0,this.max=o(l.max)?l.max:1/0,this.errorMsg=l.error||"Please Enter A Valid Value",this.validator=l.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(l){!l&&l!==0?(this.placeholder=!0,this.rendered=e.gray(this.transform.render(`${this.initial}`)),this._value=""):(this.placeholder=!1,this.rendered=this.transform.render(`${i(l,this.round)}`),this._value=i(l,this.round)),this.fire()}get value(){return this._value}parse(l){return this.float?parseFloat(l):parseInt(l)}valid(l){return l==="-"||l==="."&&this.float||r.test(l)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let l=this.value;this.value=l!==""?l:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}async validate(){let l=await this.validator(this.value);typeof l=="string"&&(this.errorMsg=l,l=!1),this.error=!l}async submit(){if(await this.validate(),this.error){this.color="red",this.fire(),this.render();return}let l=this.value;this.value=l!==""?l:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}up(){if(this.typed="",this.value===""&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",this.value===""&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let l=this.value.toString();if(l.length===0)return this.bell();this.value=this.parse(l=l.slice(0,-1))||"",this.value!==""&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(l,a){if(!this.valid(l))return this.bell();const m=Date.now();if(m-this.lastHit>1e3&&(this.typed=""),this.typed+=l,this.lastHit=m,this.color="cyan",l===".")return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(c.down(d(this.outputError,this.out.columns)-1)+s(this.outputError,this.out.columns)),this.out.write(s(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[h.symbol(this.done,this.aborted),e.bold(this.msg),h.delimiter(this.done),!this.done||!this.done&&!this.placeholder?e[this.color]().underline(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split(`
`).reduce((l,a,m)=>l+`
${m?" ":f.pointerSmall} ${e.red().italic(a)}`,"")),this.out.write(t.line+c.to(0)+this.outputText+c.save+this.outputError+c.restore))}}return ce=u,ce}var de,Je;function We(){if(Je)return de;Je=1;const e=M(),{cursor:n}=$(),c=q(),{clear:t,figures:h,style:f,wrap:s,entriesToDisplay:d}=P();class r extends c{constructor(i={}){super(i),this.msg=i.message,this.cursor=i.cursor||0,this.scrollIndex=i.cursor||0,this.hint=i.hint||"",this.warn=i.warn||"- This option is disabled -",this.minSelected=i.min,this.showMinError=!1,this.maxChoices=i.max,this.instructions=i.instructions,this.optionsPerPage=i.optionsPerPage||10,this.value=i.choices.map((u,p)=>(typeof u=="string"&&(u={title:u,value:p}),{title:u&&(u.title||u.value||u),description:u&&u.description,value:u&&(u.value===void 0?p:u.value),selected:u&&u.selected,disabled:u&&u.disabled})),this.clear=t("",this.out.columns),i.overrideRender||this.render()}reset(){this.value.map(i=>!i.selected),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter(i=>i.selected)}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){const i=this.value.filter(u=>u.selected);this.minSelected&&i.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){this.cursor===0?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(i=>i.selected).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const i=this.value[this.cursor];if(i.selected)i.selected=!1,this.render();else{if(i.disabled||this.value.filter(u=>u.selected).length>=this.maxChoices)return this.bell();i.selected=!0,this.render()}}toggleAll(){if(this.maxChoices!==void 0||this.value[this.cursor].disabled)return this.bell();const i=!this.value[this.cursor].selected;this.value.filter(u=>!u.disabled).forEach(u=>u.selected=i),this.render()}_(i,u){if(i===" ")this.handleSpaceToggle();else if(i==="a")this.toggleAll();else return this.bell()}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${h.arrowUp}/${h.arrowDown}: Highlight option
    ${h.arrowLeft}/${h.arrowRight}/[space]: Toggle selection
`+(this.maxChoices===void 0?`    a: Toggle all
`:"")+"    enter/return: Complete answer":""}renderOption(i,u,p,l){const a=(u.selected?e.green(h.radioOn):h.radioOff)+" "+l+" ";let m,g;return u.disabled?m=i===p?e.gray().underline(u.title):e.strikethrough().gray(u.title):(m=i===p?e.cyan().underline(u.title):u.title,i===p&&u.description&&(g=` - ${u.description}`,(a.length+m.length+g.length>=this.out.columns||u.description.split(/\r?\n/).length>1)&&(g=`
`+s(u.description,{margin:a.length,width:this.out.columns})))),a+m+e.gray(g||"")}paginateOptions(i){if(i.length===0)return e.red("No matches for this query.");let{startIndex:u,endIndex:p}=d(this.cursor,i.length,this.optionsPerPage),l,a=[];for(let m=u;m<p;m++)m===u&&u>0?l=h.arrowUp:m===p-1&&p<i.length?l=h.arrowDown:l=" ",a.push(this.renderOption(this.cursor,i[m],m,l));return`
`+a.join(`
`)}renderOptions(i){return this.done?"":this.paginateOptions(i)}renderDoneOrInstructions(){if(this.done)return this.value.filter(u=>u.selected).map(u=>u.title).join(", ");const i=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&i.push(e.yellow(this.warn)),i.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(n.hide),super.render();let i=[f.symbol(this.done,this.aborted),e.bold(this.msg),f.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.value),this.out.write(this.clear+i),this.clear=t(i,this.out.columns)}}return de=r,de}var fe,Ke;function kt(){if(Ke)return fe;Ke=1;const e=M(),n=q(),{erase:c,cursor:t}=$(),{style:h,clear:f,figures:s,wrap:d,entriesToDisplay:r}=P(),o=(l,a)=>l[a]&&(l[a].value||l[a].title||l[a]),i=(l,a)=>l[a]&&(l[a].title||l[a].value||l[a]),u=(l,a)=>{const m=l.findIndex(g=>g.value===a||g.title===a);return m>-1?m:void 0};class p extends n{constructor(a={}){super(a),this.msg=a.message,this.suggest=a.suggest,this.choices=a.choices,this.initial=typeof a.initial=="number"?a.initial:u(a.choices,a.initial),this.select=this.initial||a.cursor||0,this.i18n={noMatches:a.noMatches||"no matches found"},this.fallback=a.fallback||this.initial,this.clearFirst=a.clearFirst||!1,this.suggestions=[],this.input="",this.limit=a.limit||10,this.cursor=0,this.transform=h.render(a.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=f("",this.out.columns),this.complete(this.render),this.render()}set fallback(a){this._fb=Number.isSafeInteger(parseInt(a))?parseInt(a):a}get fallback(){let a;return typeof this._fb=="number"?a=this.choices[this._fb]:typeof this._fb=="string"&&(a={title:this._fb}),a||this._fb||{title:this.i18n.noMatches}}moveSelect(a){this.select=a,this.suggestions.length>0?this.value=o(this.suggestions,a):this.value=this.fallback.value,this.fire()}async complete(a){const m=this.completing=this.suggest(this.input,this.choices),g=await m;if(this.completing!==m)return;this.suggestions=g.map((y,w,b)=>({title:i(b,w),value:o(b,w),description:y.description})),this.completing=!1;const x=Math.max(g.length-1,0);this.moveSelect(Math.min(x,this.select)),a&&a()}reset(){this.input="",this.complete(()=>{this.moveSelect(this.initial!==void 0?this.initial:0),this.render()}),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(a,m){let g=this.input.slice(0,this.cursor),x=this.input.slice(this.cursor);this.input=`${g}${a}${x}`,this.cursor=g.length+1,this.complete(this.render),this.render()}delete(){if(this.cursor===0)return this.bell();let a=this.input.slice(0,this.cursor-1),m=this.input.slice(this.cursor);this.input=`${a}${m}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let a=this.input.slice(0,this.cursor),m=this.input.slice(this.cursor+1);this.input=`${a}${m}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){this.select===0?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(a,m,g,x){let y,w=g?s.arrowUp:x?s.arrowDown:" ",b=m?e.cyan().underline(a.title):a.title;return w=(m?e.cyan(s.pointer)+" ":"  ")+w,a.description&&(y=` - ${a.description}`,(w.length+b.length+y.length>=this.out.columns||a.description.split(/\r?\n/).length>1)&&(y=`
`+d(a.description,{margin:3,width:this.out.columns}))),w+" "+b+e.gray(y||"")}render(){if(this.closed)return;this.firstRender?this.out.write(t.hide):this.out.write(f(this.outputText,this.out.columns)),super.render();let{startIndex:a,endIndex:m}=r(this.select,this.choices.length,this.limit);if(this.outputText=[h.symbol(this.done,this.aborted,this.exited),e.bold(this.msg),h.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const g=this.suggestions.slice(a,m).map((x,y)=>this.renderOption(x,this.select===y+a,y===0&&a>0,y+a===m-1&&m<this.choices.length)).join(`
`);this.outputText+=`
`+(g||e.gray(this.fallback.title))}this.out.write(c.line+t.to(0)+this.outputText)}}return fe=p,fe}var pe,ze;function It(){if(ze)return pe;ze=1;const e=M(),{cursor:n}=$(),c=We(),{clear:t,style:h,figures:f}=P();class s extends c{constructor(r={}){r.overrideRender=!0,super(r),this.inputValue="",this.clear=t("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){this.cursor===0?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter(r=>r.selected).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const r=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter(i=>this.inputValue?!!(typeof i.title=="string"&&i.title.toLowerCase().includes(this.inputValue.toLowerCase())||typeof i.value=="string"&&i.value.toLowerCase().includes(this.inputValue.toLowerCase())):!0);const o=this.filteredOptions.findIndex(i=>i===r);this.cursor=o<0?0:o,this.render()}handleSpaceToggle(){const r=this.filteredOptions[this.cursor];if(r.selected)r.selected=!1,this.render();else{if(r.disabled||this.value.filter(o=>o.selected).length>=this.maxChoices)return this.bell();r.selected=!0,this.render()}}handleInputChange(r){this.inputValue=this.inputValue+r,this.updateFilteredOptions()}_(r,o){r===" "?this.handleSpaceToggle():this.handleInputChange(r)}renderInstructions(){return this.instructions===void 0||this.instructions?typeof this.instructions=="string"?this.instructions:`
Instructions:
    ${f.arrowUp}/${f.arrowDown}: Highlight option
    ${f.arrowLeft}/${f.arrowRight}/[space]: Toggle selection
    [a,b,c]/delete: Filter choices
    enter/return: Complete answer
`:""}renderCurrentInput(){return`
Filtered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}
`}renderOption(r,o,i){let u;return o.disabled?u=r===i?e.gray().underline(o.title):e.strikethrough().gray(o.title):u=r===i?e.cyan().underline(o.title):o.title,(o.selected?e.green(f.radioOn):f.radioOff)+"  "+u}renderDoneOrInstructions(){if(this.done)return this.value.filter(o=>o.selected).map(o=>o.title).join(", ");const r=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&r.push(e.yellow(this.warn)),r.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(n.hide),super.render();let r=[h.symbol(this.done,this.aborted),e.bold(this.msg),h.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(r+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),r+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+r),this.clear=t(r,this.out.columns)}}return pe=s,pe}var me,Qe;function Et(){if(Qe)return me;Qe=1;const e=M(),n=q(),{style:c,clear:t}=P(),{erase:h,cursor:f}=$();class s extends n{constructor(r={}){super(r),this.msg=r.message,this.value=r.initial,this.initialValue=!!r.initial,this.yesMsg=r.yes||"yes",this.yesOption=r.yesOption||"(Y/n)",this.noMsg=r.no||"no",this.noOption=r.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write(`
`),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write(`
`),this.close()}_(r,o){return r.toLowerCase()==="y"?(this.value=!0,this.submit()):r.toLowerCase()==="n"?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(f.hide):this.out.write(t(this.outputText,this.out.columns)),super.render(),this.outputText=[c.symbol(this.done,this.aborted),e.bold(this.msg),c.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(h.line+f.to(0)+this.outputText))}}return me=s,me}var ge,Ze;function At(){return Ze||(Ze=1,ge={TextPrompt:bt(),SelectPrompt:wt(),TogglePrompt:yt(),DatePrompt:qt(),NumberPrompt:Dt(),MultiselectPrompt:We(),AutocompletePrompt:kt(),AutocompleteMultiselectPrompt:It(),ConfirmPrompt:Et()}),ge}var Xe;function jt(){return Xe||(Xe=1,function(e){const n=e,c=At(),t=s=>s;function h(s,d,r={}){return new Promise((o,i)=>{const u=new c[s](d),p=r.onAbort||t,l=r.onSubmit||t,a=r.onExit||t;u.on("state",d.onState||t),u.on("submit",m=>o(l(m))),u.on("exit",m=>o(a(m))),u.on("abort",m=>i(p(m)))})}n.text=s=>h("TextPrompt",s),n.password=s=>(s.style="password",n.text(s)),n.invisible=s=>(s.style="invisible",n.text(s)),n.number=s=>h("NumberPrompt",s),n.date=s=>h("DatePrompt",s),n.confirm=s=>h("ConfirmPrompt",s),n.list=s=>{const d=s.separator||",";return h("TextPrompt",s,{onSubmit:r=>r.split(d).map(o=>o.trim())})},n.toggle=s=>h("TogglePrompt",s),n.select=s=>h("SelectPrompt",s),n.multiselect=s=>{s.choices=[].concat(s.choices||[]);const d=r=>r.filter(o=>o.selected).map(o=>o.value);return h("MultiselectPrompt",s,{onAbort:d,onSubmit:d})},n.autocompleteMultiselect=s=>{s.choices=[].concat(s.choices||[]);const d=r=>r.filter(o=>o.selected).map(o=>o.value);return h("AutocompleteMultiselectPrompt",s,{onAbort:d,onSubmit:d})};const f=(s,d)=>Promise.resolve(d.filter(r=>r.title.slice(0,s.length).toLowerCase()===s.toLowerCase()));n.autocomplete=s=>(s.suggest=s.suggest||f,s.choices=[].concat(s.choices||[]),h("AutocompletePrompt",s))}(_)),_}var ve,et;function _t(){if(et)return ve;et=1;const e=jt(),n=["suggest","format","onState","validate","onRender","type"],c=()=>{};async function t(d=[],{onSubmit:r=c,onCancel:o=c}={}){const i={},u=t._override||{};d=[].concat(d);let p,l,a,m,g,x;const y=async(w,b,v=!1)=>{if(!(!v&&w.validate&&w.validate(b)!==!0))return w.format?await w.format(b,i):b};for(l of d)if({name:m,type:g}=l,typeof g=="function"&&(g=await g(p,{...i},l),l.type=g),!!g){for(let w in l){if(n.includes(w))continue;let b=l[w];l[w]=typeof b=="function"?await b(p,{...i},x):b}if(x=l,typeof l.message!="string")throw new Error("prompt message is required");if({name:m,type:g}=l,e[g]===void 0)throw new Error(`prompt type (${g}) is not defined`);if(u[l.name]!==void 0&&(p=await y(l,u[l.name]),p!==void 0)){i[m]=p;continue}try{p=t._injected?h(t._injected,l.initial):await e[g](l),i[m]=p=await y(l,p,!0),a=await r(l,p,i)}catch{a=!await o(l,i)}if(a)return i}return i}function h(d,r){const o=d.shift();if(o instanceof Error)throw o;return o===void 0?r:o}function f(d){t._injected=(t._injected||[]).concat(d)}function s(d){t._override=Object.assign({},d)}return ve=Object.assign(t,{prompt:t,prompts:e,inject:f,override:s}),ve}var Lt=_t();const Ht=ct(Lt);let k=!0;const E=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let j=0;if(E.process&&E.process.env&&E.process.stdout){const{FORCE_COLOR:e,NODE_DISABLE_COLORS:n,NO_COLOR:c,TERM:t,COLORTERM:h}=E.process.env;n||c||e==="0"?k=!1:e==="1"||e==="2"||e==="3"?k=!0:t==="dumb"?k=!1:"CI"in E.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(f=>f in E.process.env)?k=!0:k=process.stdout.isTTY,k&&(process.platform==="win32"||h&&(h==="truecolor"||h==="24bit")?j=3:t&&(t.endsWith("-256color")||t.endsWith("256"))?j=2:j=1)}let tt={enabled:k,supportLevel:j};function it(e,n,c=1){const t=`\x1B[${e}m`,h=`\x1B[${n}m`,f=new RegExp(`\\x1b\\[${n}m`,"g");return s=>tt.enabled&&tt.supportLevel>=c?t+(""+s).replace(f,t)+h:""+s}const st=it(0,0),rt=it(31,39),Ft=["react","react-dom"],Yt=["@types/react","@types/react-dom","typescript","@tsconfig/vite-react","vite","vitest","@vitejs/plugin-react-swc","eslint@8.57.0","eslint-config-react-app","simple-git-hooks","lint-staged","prettier"],nt={"@tanstack/react-query":[],"@tanstack/react-query-persist-client":[],"@tanstack/query-sync-storage-persister":[],"@lukemorales/query-key-factory":[],"react-router-dom":[],"react-hook-form":[],"@hookform/resolvers":[],"react-error-boundary":[],recoil:[],ramda:["@types/ramda"],clsx:[],ky:[],zod:[],rxjs:[],"date-fns":[],"bignumber.js":[],"@mantine/core":["postcss","postcss-preset-mantine"],"@mantine/hooks":[],"@mantine/modals":[],"@mantine/notifications":[]};async function Vt(){return Ht([{type:"text",name:"projectName",message:st("Project name:"),initial:"project",onState:e=>{const n=e.value;if(O.existsSync(n))throw new Error(rt("\u2716")+` Directory ${n} exists`)}},{type:"multiselect",name:"packages",message:st("Select packages:"),choices:Object.keys(nt).map(e=>({title:e,value:e}))}],{onCancel:()=>{throw new Error(rt("\u2716")+" Operation cancelled")}})}function Nt(e){return{"postcss.config.cjs":()=>{if(e.includes("@mantine/core"))return`module.exports = {
  plugins: {
    "postcss-preset-mantine": {},
  },
}
`},"src/main.tsx":()=>`import { StrictMode } from "react"
import { createRoot } from "react-dom/client"
${[e.includes("react-router-dom")&&'import { createBrowserRouter, RouterProvider } from "react-router-dom',e.includes("@tanstack/react-query")&&'import { QueryClient, QueryClientProvider } from "@tanstack/react-query"',e.includes("@mantine/core")&&'import { MantineProvider } from "@mantine/core"',e.includes("@mantine/core")&&'import "@mantine/core/styles.css"',e.includes("react-router-dom")?'import routes from "./routes"':'import App from "./app/App"',e.includes("@mantine/core")&&'import theme from "./theme"'].filter(Boolean).join(`
`)}

${e.includes("react-router-dom")?"const router = createBrowserRouter(routes)":""}
${e.includes("@tanstack/react-query")?"const queryClient = new QueryClient()":""}

createRoot(document.getElementById("root")!).render(
  <StrictMode>
${e.includes("@mantine/core")?'<MantineProvider theme={theme} defaultColorScheme="dark">':""}
${e.includes("@tanstack/react-query")?"QueryClientProvider client={queryClient}>":""}
${e.includes("react-router-dom")?"<RouterProvider router={router} />":"<App />"}
${e.includes("@tanstack/react-query")?"QueryClientProvider>":""}
${e.includes("@mantine/core")?"</MantineProvider>":""}
  </StrictMode>
)
`,"src/routes.tsx":()=>{if(e.includes("react-router-dom"))return`import App from "./app/App"
import Home from "./pages/Home"

const routes = [
  {
    path: "/",
    element: <App />,
    children: [{ index: true, element: <Home /> }],
  },
]

export default routes
`},"src/theme.ts":()=>{if(e.includes("@mantine/core"))return`import { createTheme } from "@mantine/core"

const theme = createTheme({})

export default theme
`},"src/app/App.tsx":()=>`${e.includes("react-router-dom")?'import { Outlet } from "react-router-dom"':""}

const App = () => {
  return ${e.includes("react-router-dom")?"<Outlet />":"null"}
}

export default App
`,"src/pages/Home.tsx":()=>{if(e.includes("react-router-dom"))return`const Home = () => {
  return null
}

export default Home
`}}}const Bt=process.cwd(),Ut={_gitignore:".gitignore"};async function Gt(){const{projectName:e,packages:n}=await Vt(),c=D.join(Bt,e),t=(r,o)=>{const i=D.join(c,Ut[r]??r),u=D.dirname(i);O.existsSync(u)||O.mkdirSync(u,{recursive:!0}),o?O.writeFileSync(i,o):be(D.join(h,r),i)};O.mkdirSync(c,{recursive:!0});const h=D.resolve(ht(import.meta.url),"../..","template"),f=O.readdirSync(h);for(const r of f)t(r);for(const[r,o]of Object.entries(Nt(n))){const i=o();i&&t(r,i)}const s=[...Ft,...n],d=[...Yt,...n.flatMap(r=>nt[r])];I(`pnpm i ${s.join(" ")}`,{cwd:c,stdio:"inherit"}),I(`pnpm i -D ${d.join(" ")}`,{cwd:c,stdio:"inherit"}),I("pnpm prettier --write .",{cwd:c}),I("git init",{cwd:c}),I("git add .",{cwd:c}),I('git commit -m "Initial commit"',{cwd:c}),console.log(`
Done. Now run:
  pnpm dev
`)}Gt().catch(e=>{console.error(e)});
